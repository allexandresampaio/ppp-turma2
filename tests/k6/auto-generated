import http from 'k6/http';
import { sleep, check } from 'k6';
//@ts-ignore
import { expect } from 'https://jslib.k6.io/k6-testing/0.6.1/index.js';

export const options = {
  vus: 100,
  duration: '30s',
  //iterations: 100,
  
  // // define scenarios
  // scenarios: {
  //   // arbitrary name of scenario
  //   average_load: {
  //     executor: 'ramping-vus',
  //     stages: [
  //       // ramp up to average load of 20 virtual users
  //       { duration: '5s', target: 20 },
  //       // up load
  //       { duration: '10s', target: 40 },
  //       // ramp down to zero
  //       { duration: '5s', target: 0 },
  //     ],
  //   },
  // },

};

export default function() {
  let res = http.get('https://quickpizza.grafana.com');
  
  check(res, { 
    "status is 200": 
      (res) => res.status === 200,
    "status text deve retornar OK":
      (res) => res.status_text === "200 OK"
  });

  expect.soft(res.status).toBe(200);
  expect.soft(res.status_text).toBe("200 OK");

  sleep(1);
}
